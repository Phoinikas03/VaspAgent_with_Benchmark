LATTICE_CONSTRAINTS =  Description: Sets three boolean to selectively allow changes in the lattice vectors. The lattice vectors {\displaystyle \mathbf{a}_{1}} {\displaystyle \mathbf{a}_{1}} , {\displaystyle \mathbf{a}_{2}} {\displaystyle \mathbf{a}_{2}} , {\displaystyle \mathbf{a}_{3}} {\displaystyle \mathbf{a}_{3}} defined in the POSCAR file can be represented by following matrix: {\displaystyle \mathbf{A} = \begin{bmatrix} a_{11} & a_{12} & a_{13} \\ a_{21} & a_{22} & a_{23} \\ a_{31} & a_{32} & a_{33} \end{bmatrix}. } {\displaystyle \mathbf{A} = \begin{bmatrix} a_{11} & a_{12} & a_{13} \\ a_{21} & a_{22} & a_{23} \\ a_{31} & a_{32} & a_{33} \end{bmatrix}. } LATTICE_CONSTRAINTS is used to constrain certain entries of this matrix during an MD run. Orthorhombic case For orthorhombic unit cells {\displaystyle \mathbf{A}} {\displaystyle \mathbf{A}} is of diagonal form: {\displaystyle \mathbf{A} = \begin{bmatrix} a_{11} & 0 & 0 \\ 0 & a_{22} & 0 \\ 0 & 0 & a_{33} \end{bmatrix}, } {\displaystyle \mathbf{A} = \begin{bmatrix} a_{11} & 0 & 0 \\ 0 & a_{22} & 0 \\ 0 & 0 & a_{33} \end{bmatrix}, } Therefore by setting one of the entries of LATTICE_CONSTRAINTS to FALSE the lattice parameter in this direction will not be allowed to change. For MD simulations ( IBRION =0), we recommend using LATTICE_CONSTRAINTS for (orthorhombic) liquids in the isobaric-isothermal ( NpT ) ensemble in the following way: Here, the first two lattice constants are not allowed to change. The third lattice constant needs to be free to allow volume changes for the barostat. The system is then like a piston. The constraints are necessary for liquids in NpT simulations because if all lattice degrees of freedom are allowed to relax, irreversible deformations of the cell are very likely to happen. This can lead to undesirable results like a very flat supercell, which cannot be used to obtain valid MD trajectories. For structure relaxation ( IBRION =1,2), LATTICE_CONSTRAINTS is useful to relax the lattice constants of 2D materials. In case of a slab in the {\displaystyle \mathbf{a}_1} {\displaystyle \mathbf{a}_1} - {\displaystyle \mathbf{a}_2} {\displaystyle \mathbf{a}_2} plane, add vacuum padding along {\displaystyle \mathbf{a}_3} {\displaystyle \mathbf{a}_3} and set Non-orthorhombic case For non-orthorhombic boxes LATTICE_CONSTRAINTS is more complicated to use. The tag will set certain rows and columns of the stress tensor {\displaystyle \mathbf{\sigma} = \begin{bmatrix} xx & xy & xz \\ yx & yy & yz \\ zx & zy & zz \end{bmatrix}, } {\displaystyle \mathbf{\sigma} = \begin{bmatrix} xx & xy & xz \\ yx & yy & yz \\ zx & zy & zz \end{bmatrix}, } to zero. By setting certain entries of the stress tensor to zero the corresponding entries of the lattice {\displaystyle \mathbf{A}} {\displaystyle \mathbf{A}} will not be updated. For example when setting LATTICE_CONSTRAINTS = .FALSE. .TRUE. .TRUE. the used stress tensor will look like {\displaystyle \mathbf{\sigma} = \begin{bmatrix} 0 & 0 & 0 \\ 0 & yy & yz \\ 0 & zy & zz \end{bmatrix}, } {\displaystyle \mathbf{\sigma} = \begin{bmatrix} 0 & 0 & 0 \\ 0 & yy & yz \\ 0 & zy & zz \end{bmatrix}, } and therefore the first row and the first column of the lattice {\displaystyle \mathbf{A}} {\displaystyle \mathbf{A}} will not change. Another example would be to set LATTICE_CONSTRAINTS = .FALSE. .TRUE. .FALSE. resulting in the following stress tensor {\displaystyle \mathbf{\sigma} = \begin{bmatrix} 0 & 0 & 0 \\ 0 & yy & 0 \\ 0 & 0 & 0 \end{bmatrix} } {\displaystyle \mathbf{\sigma} = \begin{bmatrix} 0 & 0 & 0 \\ 0 & yy & 0 \\ 0 & 0 & 0 \end{bmatrix} } So only the {\displaystyle yy} {\displaystyle yy} / {\displaystyle a_{22}} {\displaystyle a_{22}} entry of the lattice {\displaystyle \mathbf{A}} {\displaystyle \mathbf{A}} will change. Related tags and articles IBRION , MDALGO , Interface pinning Examples that use this tag