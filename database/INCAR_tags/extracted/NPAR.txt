<p><a class="mw-selflink selflink">NPAR</a> = [integer]<br/> Default: <b>NPAR</b> = number of cores 
</p>
<p>Description: <a class="mw-selflink selflink">NPAR</a> determines the number of bands that are treated in parallel. 
</p>
<p>VASP currently offers parallelization and data distribution over bands and/or over plane wave coefficients, and as of VASP.5.3.2, parallelization over <b>k</b>-points (no data distribution, see <a href="/wiki/index.php/KPAR" title="KPAR">KPAR</a>).
To obtain high efficiency on massively parallel systems or modern multi-core machines, it is strongly recommended to use all at the same time. Most algorithms work with any data distribution (except for the single band conjugated gradient, which is considered to be obsolete).
</p>
<p><a class="mw-selflink selflink">NPAR</a> determines how many bands are treated in parallel. The current default is <a class="mw-selflink selflink">NPAR</a>=<i>number of cores</i>, meaning that one orbital is treated by one core. <a href="/wiki/index.php/NCORE" title="NCORE">NCORE</a> is then set to 1. If <a class="mw-selflink selflink">NPAR</a>=1, <a href="/wiki/index.php/NCORE" title="NCORE">NCORE</a> is set to the number of cores. This implies data distribution over plane wave coefficients only: all cores will work together on every individual band, i.e., the plane wave coefficients of each band are distributed over all cores. This is usually very slow and should be avoided.
</p>
<p><a class="mw-selflink selflink">NPAR</a>=<i>number of cores</i> is the optimal setting for platforms with a small communication bandwidth and is a good choice for up to 8 cores, as well as for machines with a single core per node and a Gigabit network. However, this mode substantially increases the memory requirements, because the non-local projector functions must be stored entirely on each core. In addition, substantial all-to-all communications are required to orthogonalize the bands. On massively parallel systems and modern multi-core machines we strongly urge to set 
</p>
<p>or
</p>
<p><br/>
In selected cases, we found that this improves the performance by a factor of up to four compared to the default, and it also significantly improves the stability of the code due to reduced memory requirements.
</p>
<p><a href="/wiki/index.php/NCORE" title="NCORE">NCORE</a> is available from VASP.5.2.13 on, and is more handy than the previous parameter <a class="mw-selflink selflink">NPAR</a>.
The user should either specify <a href="/wiki/index.php/NCORE" title="NCORE">NCORE</a> or <a class="mw-selflink selflink">NPAR</a>, where <a class="mw-selflink selflink">NPAR</a> takes a higher preference.
The relation between both parameters is 
</p>
<p><br/>
The optimum settings for <a class="mw-selflink selflink">NPAR</a> and <a href="/wiki/index.php/LPLANE" title="LPLANE">LPLANE</a> depend strongly on the type of machine you are using.
Some recommended setups:
</p>
<ul><li>LINUX cluster linked by Infiniband, modern multicore machines:</li></ul>
<ul><li>LINUX cluster linked by 1 Gbit Ethernet, and LINUX clusters with single cores:</li></ul>
<ul><li>Massively parallel machines (Cray, Blue Gene):</li></ul>
<h2><span class="mw-headline" id="Related_tags_and_articles">Related tags and articles</span></h2>
<p><a href="/wiki/index.php/NCORE" title="NCORE">NCORE</a>,
<a href="/wiki/index.php/LPLANE" title="LPLANE">LPLANE</a>,
<a href="/wiki/index.php/LSCALU" title="LSCALU">LSCALU</a>,
<a href="/wiki/index.php/NSIM" title="NSIM">NSIM</a>,
<a href="/wiki/index.php/KPAR" title="KPAR">KPAR</a>,
<a href="/wiki/index.php/LSCALAPACK" title="LSCALAPACK">LSCALAPACK</a>,
<a href="/wiki/index.php/LSCAAWARE" title="LSCAAWARE">LSCAAWARE</a>
</p>
<p><a href="/wiki/index.php/Special:Search/%22NPAR%22_incategory:%22Examples%22" title='Special:Search/"NPAR" incategory:"Examples"'>Examples that use this tag</a>
</p>
